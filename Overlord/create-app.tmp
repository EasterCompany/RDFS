#! /usr/bin/python3
import sys
from os import system as s, getcwd as _cwd
try:
  cwd=_cwd()
  s("clear")
  print("\nWelcome to the Overlord Installer!\n")
  n=input("Project Name: ")
  print(f"\nCreating {n} @ {cwd} ...")
  s(f"git clone --quiet --single-branch --branch Prd --depth=1 git@github.com:EasterCompany/Overlord.git {n}")
  print(f"Success!\n\nInstalling {n} ...")
  s(f"cd {n} && rm -rf .git && {sys.executable} core.py tools install")
  print(f"Your project is ready @ {cwd}/{n}")
  print(f"Enter the directory using 'cd {n}' and enter './o' to open the Overlord-CLI")
except:
  print("\n\nSorry, a fatal error was encountered.\nAborting Installation process...\n\n")
s(f"rm {__file__}")